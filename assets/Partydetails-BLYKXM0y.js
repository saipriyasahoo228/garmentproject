import{r as n,j as e,S as Y,U as u,V as k,W,X as N,Y as A,Z as l,ab as Z,ac as J,ad as Q,ae as b,_ as d,$ as I,a0 as ee,a1 as re,a2 as ne,a3 as K,a4 as a,a5 as ae,a6 as q,a7 as te,a8 as se}from"./index-v4F5H99w.js";import{a as x}from"./auth-BpA-8A-v.js";import{C as le}from"./CircularProgress-BJOO4fYM.js";function ce(){const[t,c]=n.useState({party_name:"",gst_number:"",registration_number:"",party_type:"",phone:"",email:"",address:"",description:""}),[m,C]=n.useState([]),[h,R]=n.useState({add:!1}),[B,p]=n.useState(!1),[f,y]=n.useState(null),[L,O]=n.useState(null),[F,j]=n.useState(!1),D=n.useRef(null),_=n.useRef(null),G=n.useRef(null),P=n.useRef(null),w=n.useRef(null),g=n.useRef(null),v=n.useRef(null),U=n.useRef(null),T=async()=>{try{const r=await x.get("/api/user/party/");C(r.data.data)}catch(r){console.error("Error fetching items:",r)}};n.useEffect(()=>{T()},[]);const i=r=>{c({...t,[r.target.name]:r.target.value})},V=()=>{c({party_name:"",gst_number:"",registration_number:"",party_type:"",phone:"",email:"",address:"",description:""}),y(null),p(!0)},E=()=>{p(!1)},$=async r=>{r.preventDefault(),R({...h,add:!0});try{if(f!==null){const s=await x.put(`/api/user/party/${t.party_name}/`,t);alert(s.data.message)}else{const s=await x.post("/api/user/party/",t);alert(s.data.message)}await T()}catch(s){console.error("Error adding/updating party:",s)}finally{R({...h,add:!1}),c({party_name:"",gst_number:"",registration_number:"",party_type:"",phone:"",email:"",address:"",description:""}),y(null),p(!1)}},M=r=>{const s=m[r];c(s),y(r),p(!0)},z=r=>{O(r),j(!0),c(m[r])},H=async()=>{try{await x.delete(`/api/user/party/${t.party_name}/`,t);const r=m.filter((s,X)=>X!==L);C(r)}catch(r){console.error("Error deleting party:",r)}finally{j(!1)}},S=()=>{j(!1)},o=(r,s)=>{r.key==="Enter"&&s&&(r.preventDefault(),s.current.focus())};return e.jsxs(Y,{sx:{maxWidth:"100%",padding:2},children:[e.jsx(u,{variant:"contained",color:"secondary",onClick:V,children:"Add Party"}),e.jsxs(k,{open:B,onClose:E,maxWidth:"md",fullWidth:!0,children:[e.jsx(W,{style:{backgroundColor:"#f9dff5"},children:f!==null?"Edit Party Details":"Add Party Details"}),e.jsx(N,{style:{backgroundColor:"#f9dff5"},children:e.jsx(A,{sx:{padding:"10px",backgroundColor:"#f9dff5"},elevation:0,children:e.jsxs("form",{children:[e.jsxs(l,{container:!0,spacing:2,marginBottom:2,children:[e.jsx(l,{item:!0,xs:6,children:e.jsxs(Z,{fullWidth:!0,margin:"normal",required:!0,children:[e.jsx(J,{children:"Party Type"}),e.jsxs(Q,{value:t.party_type,name:"party_type",onChange:i,label:"Party Type",inputRef:G,onKeyDown:r=>o(r,D),children:[e.jsx(b,{value:"Vendor",children:"Vendor"}),e.jsx(b,{value:"Supplier",children:"Supplier"}),e.jsx(b,{value:"Customer",children:"Customer"})]})]})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,label:"Party Name",name:"party_name",value:t.party_name,onChange:i,margin:"normal",required:!0,inputRef:D,onKeyDown:r=>o(r,_)})})]}),e.jsxs(l,{container:!0,spacing:2,marginBottom:2,children:[e.jsx(l,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,label:"GST Number",name:"gst_number",value:t.gst_number,onChange:i,margin:"normal",required:!0,inputRef:_,onKeyDown:r=>o(r,P)})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,label:"Phone Number",name:"phone",value:t.phone,onChange:i,margin:"normal",required:!0,inputRef:P,onKeyDown:r=>o(r,w)})})]}),e.jsxs(l,{container:!0,spacing:2,marginBottom:2,children:[e.jsxs(l,{item:!0,xs:6,children:[e.jsx(d,{fullWidth:!0,label:"Email",name:"email",value:t.email,onChange:i,margin:"normal",required:!0,inputRef:w,onKeyDown:r=>o(r,g)}),e.jsx(d,{fullWidth:!0,label:"Registration Number",name:"registration_number",value:t.registration_number,onChange:i,margin:"normal",required:!0,inputRef:U,onKeyDown:r=>o(r,g)})]}),e.jsxs(l,{item:!0,xs:6,children:[e.jsx(d,{fullWidth:!0,multiline:!0,label:"Address",name:"address",value:t.address,onChange:i,margin:"normal",required:!0,inputRef:g,onKeyDown:r=>o(r,v)}),e.jsx(d,{fullWidth:!0,multiline:!0,rows:2,label:"Description",name:"description",value:t.description,onChange:i,margin:"normal",inputRef:v})]})]})]})})}),e.jsxs(I,{style:{backgroundColor:"#f9dff5"},children:[e.jsx(u,{onClick:E,color:"error",children:"Cancel"}),e.jsx(u,{onClick:$,color:"secondary",disabled:h.add,children:h.add?e.jsx(le,{size:24}):f!==null?"Update":"Submit"})]})]}),e.jsxs(k,{open:F,onClose:S,children:[e.jsx(W,{children:"Confirm Delete"}),e.jsx(N,{children:"Are you sure you want to delete this party?"}),e.jsxs(I,{children:[e.jsx(u,{onClick:S,color:"secondary",children:"CANCEL"}),e.jsx(u,{onClick:H,color:"error",children:"CONFIRM"})]})]}),e.jsx(ee,{component:A,sx:{marginTop:2},children:e.jsxs(re,{children:[e.jsx(ne,{children:e.jsxs(K,{children:[e.jsx(a,{children:"Party Name"}),e.jsx(a,{children:"Party Type"}),e.jsx(a,{children:"Phone"}),e.jsx(a,{children:"Email"}),e.jsx(a,{children:"GST Number"}),e.jsx(a,{children:"Registraion No."}),e.jsx(a,{children:"Address"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(ae,{children:m.map((r,s)=>e.jsxs(K,{children:[e.jsx(a,{children:r.party_name}),e.jsx(a,{children:r.party_type}),e.jsx(a,{children:r.phone}),e.jsx(a,{children:r.email}),e.jsx(a,{children:r.gst_number}),e.jsx(a,{children:r.registration_number}),e.jsx(a,{children:r.address}),e.jsxs(a,{children:[e.jsx(q,{onClick:()=>M(s),color:"secondary",children:e.jsx(te,{})}),e.jsx(q,{onClick:()=>z(s),color:"error",children:e.jsx(se,{})})]})]},r.party_name))})]})})]})}export{ce as default};
