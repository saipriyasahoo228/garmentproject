import{r as s,j as e,_ as m,ak as y,V as E,a0 as F,ad as Q,af as I,ag as j,a2 as B,a3 as z,a4 as A,a5 as b,a6 as o,a7 as O,M as N}from"./index-Dy87SfDR.js";import{d as L,T as M,u as g,w as V}from"./PictureAsPdf-CwN8_mG7.js";import{d as W}from"./InsertDriveFile-BL6WF-X7.js";import{E as G}from"./jspdf.plugin.autotable-C2ZUzCt0.js";import{C as H}from"./Container-DcIQiiR4.js";const X=()=>{const[x,k]=s.useState(""),[_,C]=s.useState([]),[h,f]=s.useState("asc"),[c,S]=s.useState("item_name"),[i,p]=s.useState(0),[l,T]=s.useState(5);s.useEffect(()=>{(async()=>{try{const r=await N.get("api/retailsale/item-stock-summary/");C(r.data.data)}catch(r){console.error("Error fetching stock report data:",r)}})()},[]);const P=t=>{k(t.target.value)},a=t=>{f(c===t&&h==="asc"?"desc":"asc"),S(t)},d=_.filter(t=>t.item_name.toLowerCase().includes(x.toLowerCase())),u=d.sort((t,r)=>h==="asc"?t[c]<r[c]?-1:1:t[c]>r[c]?-1:1),R=()=>{const t=new G;t.text("Stock Report",20,10);const r=["Date","Item Name","Item Code","Category","Sub Category","Size","Current Stock Quantity","Original Stock Quantity","Total Quantity Added","Total Deducted Quantity"],D=d.map(n=>[n.date,n.item_name,n.item_code,n.category,n.sub_category,n.size,n.current_stock_quantity,n.original_stock_quantity,n.total_quantity_added,n.total_deducted_quantity]);t.autoTable({head:[r],body:D,startY:20}),t.save("stock_report.pdf")},q=()=>{const t=g.json_to_sheet(d),r=g.book_new();g.book_append_sheet(r,t,"Stock Report"),V(r,"stock_report.xlsx")},v=t=>{const r=t.target.value;r==="pdf"?R():r==="excel"&&q()};return e.jsx(H,{maxWidth:"lg",sx:{marginTop:4},children:e.jsxs(m,{elevation:3,sx:{padding:4,backgroundColor:"#f9dff5"},children:[e.jsx(y,{variant:"h4",gutterBottom:!0,align:"center",color:"purple",children:"Stock Report"}),e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between",marginBottom:2},children:[e.jsx(F,{label:"Search Item",value:x,onChange:P,sx:{flexGrow:1,marginRight:2}}),e.jsx(Q,{sx:{minWidth:160},children:e.jsxs(I,{value:"",onChange:v,displayEmpty:!0,renderValue:()=>"Export As",children:[e.jsxs(j,{value:"pdf",children:[e.jsx(L,{sx:{color:"red",marginRight:1}}),"PDF"]}),e.jsxs(j,{value:"excel",children:[e.jsx(W,{sx:{color:"green",marginRight:1}}),"Excel"]})]})})]}),u.length>0?e.jsxs(e.Fragment,{children:[e.jsx(B,{component:m,sx:{marginTop:4,backgroundColor:"#f4c4ec"},children:e.jsxs(z,{children:[e.jsx(A,{children:e.jsxs(b,{children:[e.jsx(o,{onClick:()=>a("date"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Date"})}),e.jsx(o,{onClick:()=>a("item_name"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Item Name"})}),e.jsx(o,{onClick:()=>a("item_code"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Item Code"})}),e.jsx(o,{onClick:()=>a("category"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Category"})}),e.jsx(o,{onClick:()=>a("sub_category"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Sub Category"})}),e.jsx(o,{onClick:()=>a("size"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Size"})}),e.jsx(o,{align:"right",onClick:()=>a("current_stock_quantity"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Current Stock Quantity"})}),e.jsx(o,{align:"right",onClick:()=>a("original_stock_quantity"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Original Stock Quantity"})}),e.jsx(o,{align:"right",onClick:()=>a("total_quantity_added"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Total Quantity Added"})}),e.jsx(o,{align:"right",onClick:()=>a("total_deducted_quantity"),sx:{cursor:"pointer",backgroundColor:"#ea8cdb",fontStyle:"bold",color:"purple"},children:e.jsx("strong",{children:"Total Deducted Quantity"})})]})}),e.jsx(O,{children:u.slice(i*l,i*l+l).map(t=>e.jsxs(b,{children:[e.jsx(o,{children:t.date}),e.jsx(o,{children:t.item_name}),e.jsx(o,{children:t.item_code}),e.jsx(o,{children:t.category}),e.jsx(o,{children:t.sub_category}),e.jsx(o,{children:t.size}),e.jsx(o,{align:"right",children:t.current_stock_quantity}),e.jsx(o,{align:"right",children:t.original_stock_quantity}),e.jsx(o,{align:"right",children:t.total_quantity_added}),e.jsx(o,{align:"right",children:t.total_deducted_quantity})]},t.item_code))})]})}),e.jsx(M,{rowsPerPageOptions:[5,10,25],component:"div",count:u.length,rowsPerPage:l,page:i,onPageChange:(t,r)=>p(r),onRowsPerPageChange:t=>{T(parseInt(t.target.value,10)),p(0)}})]}):e.jsx(y,{variant:"body1",color:"textSecondary",align:"center",children:"No items found."})]})})};export{X as default};
